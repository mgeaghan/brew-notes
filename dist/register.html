<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Register</title>
		<link rel="stylesheet" type="text/css" href="/static/css/main.css">
		<link rel="stylesheet" type="text/css" href="/static/css/login-register.css">
	</head>

	<body>
		<form action="/register" method="post">
			<div class="title">
				<h3>Register</h3>
			</div>

			<div class="field">
				<label>Username:</label>
				<input type="text" name="username" class="text-input username-password username" />
				<br />
			</div>

			<div class="field">
				<label>Password:</label>
				<input type="password" name="password" id="password" class="text-input username-password password" required />
			</div>

			<div class="field">
				<label>Retype password:</label>
				<input type="password" name="confirm-password" id="confirm-password" class="text-input username-password password" required />
			</div>

			<div class="field">
				<input class="submit-btn" type="submit" value="Submit" required />
			</div>

			<label id="error-message"></label>
		</form>

		<a href="/login">Login</a>

		<script>
			const password = document.getElementById("password");
			const confirm_password = document.getElementById("confirm-password");

			const validatePassword = () => {
				if (password.value != confirm_password.value) {
					confirm_password.setCustomValidity("Passwords don't match.");
				} else {
					confirm_password.setCustomValidity("");
				}
			};

			password.onchange = validatePassword;
			confirm_password.onkeyup = validatePassword;

			const urlParams = new URLSearchParams(window.location.search);
			const info = urlParams.get('info');

			if (info) {
				const errorMessage = document.getElementById("error-message");
				errorMessage.innerText = info;
				errorMessage.style.display = "block";
			}
		</script>
	</body>
</html>